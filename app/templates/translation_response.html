{% extends "base.html" %}
{% block content %}

<div class="subcontainer">

  <h1>{{ _("Response to a Challenge") }} <span style="font-weight:normal">({{ _("Beta") }})</span></h1>

{% if success %}
  <div class="alert alert-success">
    <button type="button" class="close" data-dismiss="alert">&times;</button>
    {{ success }}
  </div>
{% endif %}
{% if error %}
  <div class="alert alert-error">
    <button type="button" class="close" data-dismiss="alert">&times;</button>
    {{ error }}
  </div>
{% endif %}

  <div class="table">
    <div class="row-fluid">
      <div class="span3 header">{{ _("Original text") }} ({{ trequest.source | language_name }})</div>
      <div class="span9">{{ trequest.original_text }}</div>
    </div>

    {% if tresponse1 %}
    <div class="row-fluid">
      <div class="span3 header">{{ _("Regular translation") }} ({{ trequest.target | language_name }})</div>
      <div class="span9">{{ tresponse1.translated_text }}</div>
    </div>
    {% endif %}

    {% if tresponse2 %}
    <div class="row-fluid">
      <div class="span3 header">{{ _("Better translation") }} ({{ trequest.target | language_name }})</div>
      <div class="span9">{{ tresponse2.translated_text }}</div>
    </div>
    {% endif %}

    <div class="row-fluid">
      <div class="span3 header">{{ _("Your translation") }}</div>
      <div class="span9">
{% if tresponse %}
{% set tres_id_b62 = tresponse.id | uuid_to_b62 %}
        <p>{{ tresponse.translated_text }}</p>
        
        <button class="btn" style="min-width:7em;" onclick="location.href='{{ url_for('translation_responses', request_id=trequest.id_b62) }}'">
          {{ _("See how others did") }}
        </button>
        <button class="btn btn-primary" style="min-width:7em;" onclick="postTranslation('{{ tres_id_b62 }}')">{{ _("Post on Facebook") }}</button>
        <button class="btn btn-danger" style="min-width:7em;" onclick="deleteTranslation('{{ tres_id_b62 }}')">{{ _("Delete") }}</button>
{% else %}
        <form method="post" action="">
          <input type="hidden" name="alert_flag" value="1"/>
          <textarea name="text" style="width:99%;height:10em;"></textarea>
          <div style="text-align:right">
            <button class="btn btn-primary" style="min-width:7em;">{{ _("Save") }}</button>
          </div>
        </form>
{% endif %}
      </div>
    </div>
  </div>
</div>

{% endblock %}